<script>
//Task 1

var reviewsData = {
  data: [
    {
      id: 1,
      attributes: {
        'review-title': 'Terrible!',
        'stars': 1,
        'cost': 'high'
      }
    },
    {
      id: 2,
      attributes: {
        'review-title': 'Decent place',
        'stars': 3,
        'cost': 'average'
      }
    },
    {
      id: 3,
      attributes: {
        'review-title': 'I would come again',
        'stars': 3.5,
        'cost': 'average'
      }
    },
    {
      id: 4,
      attributes: {
        'review-title': 'So good, and cheap!',
        'stars': 4,
        'cost': 'low-average'
      }
    },
    {
      id: 5,
      attributes: {
        'review-title': 'Good, but pricey!',
        'stars': 4,
        'cost': 'high'
      }
    },
  ]
};

function extractReviews(reviewData) {
  return reviewsData.data.map(function(review) {
    return {
      id: review.id,
      title: review.attributes['review-title'],
      stars: review.attributes.stars,
      cost: review.attributes.cost,

    };
})
}

console.log(extractReviews(reviewsData));

//Task 2
var reviews = [
  { id: 1, title: 'Terrible!', stars: 1, cost: 'high' },
  { id: 2, title: 'Decent place', stars: 3, cost: 'average' },
  { id: 3, title: 'I would come again', stars: 3.5, cost: 'average' },
  { id: 4, title: 'So good, and cheap!', stars: 4, cost: 'low-average' },
  { id: 5, title: 'Good, but pricey!', stars: 4, cost: 'high' }
];

function findGoodReviews(reviews) {
  return reviews.filter(function(review) {
    return review.title.toLowerCase().indexOf('good') != -1;
  });
};
console.log(findGoodReviews(reviews));

//Task 3

var reviews = [
  { id: 1, title: 'Terrible!', stars: 1, cost: 'high' },
  { id: 2, title: 'Decent place', stars: 3, cost: 'average' },
  { id: 3, title: 'I would come again', stars: 3.5, cost: 'average' },
  { id: 4, title: 'So good, and cheap!', stars: 4, cost: 'low-average' },
  { id: 5, title: 'Good, but pricey!', stars: 4, cost: 'high' }
];

// function classifyReviewsByCost(reviews) {
//   var high = 0;
//   var average = 0;
//   var lowAverage = 0;
//   var review = reviews.reduce(function(review, item) {
//     if (item.cost == 'high') {
//       high++
//     } else if (item.cost == 'low') {
//       low++
//     } else if (item.cost == 'low-average'){
//       lowAverage++
//     }
//
//     return review;
//   }, {});
//   review.high = high;
//   review.average = average;
//   review['low-average'] = lowAverage;
//   return review;
// };

function classifyReviewsByCost(reviews) {
  var review = reviews.reduce(function(review, item) {
    if (review[item.cost]) {
      review[item.cost] = review[item.cost] + 1;
    } else {
      review[item.cost] = 1
    }

    return review;
  }, {});
    return review;
};



console.log(classifyReviewsByCost(reviews));


</script>
